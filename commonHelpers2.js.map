{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["import debounce from 'debounce';\n\nconst form = document.querySelector('.feedback-form');\nconst LOCAL_FEEDBACK_KEY = 'feedback-form-state';\n\ntry {\n  const initialFormData = JSON.parse(localStorage.getItem(LOCAL_FEEDBACK_KEY)) || {};\n\n  Array.from(form.elements).forEach(element => {\n    const storageValue = initialFormData[element.name];\n\n    if (element.name === 'email' || element.name === 'message') {\n      if (storageValue !== undefined) {\n        element.value = storageValue.trim();\n      }\n    }\n  });\n} catch (e) {\n  console.error('LOCAL STORAGE PARSE ERROR');\n}\n\nform.addEventListener(\n  'input',\n  debounce(() => {\n    const formData = new FormData(form);\n    const formObject = {};\n\n    formData.forEach((value, key) => {\n      formObject[key] = value.trim();\n    });\n\n    localStorage.setItem(LOCAL_FEEDBACK_KEY, JSON.stringify(formObject));\n  }, 300)\n);\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n\n  console.log({\n    email: form.elements.email.value.trim(),\n    message: form.elements.message.value.trim(),\n  });\n\n  localStorage.removeItem(LOCAL_FEEDBACK_KEY);\n  form.reset();\n});\n"],"names":["form","LOCAL_FEEDBACK_KEY","initialFormData","element","storageValue","debounce","formData","formObject","value","key","event"],"mappings":"oFAEA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAqB,sBAE3B,GAAI,CACF,MAAMC,EAAkB,KAAK,MAAM,aAAa,QAAQD,CAAkB,CAAC,GAAK,GAEhF,MAAM,KAAKD,EAAK,QAAQ,EAAE,QAAQG,GAAW,CAC3C,MAAMC,EAAeF,EAAgBC,EAAQ,OAEzCA,EAAQ,OAAS,SAAWA,EAAQ,OAAS,YAC3CC,IAAiB,SACnBD,EAAQ,MAAQC,EAAa,OAGrC,CAAG,CACH,MAAE,CACA,QAAQ,MAAM,2BAA2B,CAC3C,CAEAJ,EAAK,iBACH,QACAK,EAAS,IAAM,CACb,MAAMC,EAAW,IAAI,SAASN,CAAI,EAC5BO,EAAa,CAAA,EAEnBD,EAAS,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAWE,GAAOD,EAAM,KAAI,CAClC,CAAK,EAED,aAAa,QAAQP,EAAoB,KAAK,UAAUM,CAAU,CAAC,CACpE,EAAE,GAAG,CACR,EAEAP,EAAK,iBAAiB,SAAUU,GAAS,CACvCA,EAAM,eAAc,EAEpB,QAAQ,IAAI,CACV,MAAOV,EAAK,SAAS,MAAM,MAAM,KAAM,EACvC,QAASA,EAAK,SAAS,QAAQ,MAAM,KAAM,CAC/C,CAAG,EAED,aAAa,WAAWC,CAAkB,EAC1CD,EAAK,MAAK,CACZ,CAAC"}